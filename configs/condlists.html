<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Condlists - Anomaly Modding Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../meta/index.html"><strong aria-hidden="true">1.</strong> Meta</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../meta/links.html"><strong aria-hidden="true">1.1.</strong> Links</a></li><li class="chapter-item expanded "><a href="../meta/contributing/index.html"><strong aria-hidden="true">1.2.</strong> Contributing to this book</a></li><li class="chapter-item expanded "><a href="../meta/acknowledgements.html"><strong aria-hidden="true">1.3.</strong> Acknowledgements</a></li></ol></li><li class="chapter-item expanded "><a href="../getting-started/index.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/installing-mo2.html"><strong aria-hidden="true">2.1.</strong> Installing MO2</a></li><li class="chapter-item expanded "><a href="../getting-started/addon-installers.html"><strong aria-hidden="true">2.2.</strong> Addon installers</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Addon compatibility</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../addon-compatibility/dltx.html"><strong aria-hidden="true">3.1.</strong> DLTX</a></li><li class="chapter-item expanded "><a href="../addon-compatibility/monkey-patching.html"><strong aria-hidden="true">3.2.</strong> Monkey patching</a></li></ol></li><li class="chapter-item expanded "><a href="../main-folders-and-files/index.html"><strong aria-hidden="true">4.</strong> Main Folders And Files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/index.html"><strong aria-hidden="true">4.1.</strong> File Formats</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/anm.html"><strong aria-hidden="true">4.1.1.</strong> .anm</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/bump.html"><strong aria-hidden="true">4.1.2.</strong> .bump</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/bump_hash.html"><strong aria-hidden="true">4.1.3.</strong> .bump#</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/dds.html"><strong aria-hidden="true">4.1.4.</strong> .dds</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/dm.html"><strong aria-hidden="true">4.1.5.</strong> .dm</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/object.html"><strong aria-hidden="true">4.1.6.</strong> .object</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/omf.html"><strong aria-hidden="true">4.1.7.</strong> .omf</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/hom.html"><strong aria-hidden="true">4.1.8.</strong> .hom</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/efd.html"><strong aria-hidden="true">4.1.9.</strong> .efd</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/seq.html"><strong aria-hidden="true">4.1.10.</strong> .seq</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/thm.html"><strong aria-hidden="true">4.1.11.</strong> .thm</a></li></ol></li><li class="chapter-item expanded "><a href="../main-folders-and-files/shaders-list/index.html"><strong aria-hidden="true">4.2.</strong> Shaders List</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../main-folders-and-files/shaders-list/materials-list.html"><strong aria-hidden="true">4.2.1.</strong> Material Shaders List</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/shaders-list/shaders-list.html"><strong aria-hidden="true">4.2.2.</strong> Shaders List</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/shaders-list/compiler-shaders-list.html"><strong aria-hidden="true">4.2.3.</strong> Compiler Shaders List</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Configs</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../configs/ltx-files.html"><strong aria-hidden="true">5.1.</strong> LTX files</a></li><li class="chapter-item expanded "><a href="../configs/xml-files.html"><strong aria-hidden="true">5.2.</strong> XML files</a></li><li class="chapter-item expanded "><a href="../configs/condlists.html" class="active"><strong aria-hidden="true">5.3.</strong> Condlists</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Changing an item</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Creating your own item</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Dialogues</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../configs/items/weapons/w_(weapon).ltx.html"><strong aria-hidden="true">5.6.1.</strong> Weapon Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../configs/items/weapons/weapon_ammo.ltx.html"><strong aria-hidden="true">5.6.2.</strong> Ammo Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../configs/items/weapons/weapon_sounds.ltx.html"><strong aria-hidden="true">5.6.3.</strong> Weapon Sounds Parameters</a></li><li class="chapter-item expanded "><a href="../configs/items/outfits/o_(outfit).ltx.html"><strong aria-hidden="true">5.6.4.</strong> Oufits Configuration Parameters</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Scripting</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Introduction to codebase</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Codestyle</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> General suggestions</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Callbacks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> Engine classes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.6.</strong> MCM</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.7.</strong> UI</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.8.</strong> Scripted dialogues</div></li></ol></li><li class="chapter-item expanded "><a href="../modding-tools-and-resources/index.html"><strong aria-hidden="true">7.</strong> Modding Tools And Resouces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modding-tools-and-resources/modding-tools/modding-tools.html"><strong aria-hidden="true">7.1.</strong> Modding Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modding-tools-and-resources/modding-tools/thm-editor-by-valerok.html"><strong aria-hidden="true">7.1.1.</strong> THM Editor by Valerok</a></li><li class="chapter-item expanded "><a href="../modding-tools-and-resources/modding-tools/omf-editor-by-valerok.html"><strong aria-hidden="true">7.1.2.</strong> OMF Editor by Valerok</a></li><li class="chapter-item expanded "><a href="../modding-tools-and-resources/modding-tools/ogf-editor-by-valerok.html"><strong aria-hidden="true">7.1.3.</strong> OGF Editor by Valerok</a></li></ol></li><li class="chapter-item expanded "><a href="../modding-tools-and-resources/resources/index.html"><strong aria-hidden="true">7.2.</strong> Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modding-tools-and-resources/resources/audio.html"><strong aria-hidden="true">7.2.1.</strong> Audio</a></li><li class="chapter-item expanded "><a href="../modding-tools-and-resources/resources/models-objects-locations.html"><strong aria-hidden="true">7.2.2.</strong> Models</a></li><li class="chapter-item expanded "><a href="../modding-tools-and-resources/resources/sdk-rawdatas.html"><strong aria-hidden="true">7.2.3.</strong> SDK Rawdats</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Modelling</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/index.html"><strong aria-hidden="true">8.1.</strong> Blender</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/blender-x-ray-addon-summary.html"><strong aria-hidden="true">8.1.1.</strong> Blender X-Ray Addon</a></li><li class="chapter-item expanded "><a href="../blender/addon-installation-and-setup.html"><strong aria-hidden="true">8.1.2.</strong> Addon installation and setup</a></li><li class="chapter-item expanded "><a href="../blender/creating-model-in-blender.html"><strong aria-hidden="true">8.1.3.</strong> Creating model in Blender</a></li><li class="chapter-item expanded "><a href="../blender/creating-hud-animation-in-blender.html"><strong aria-hidden="true">8.1.4.</strong> Creating an animation in Blender for a HUD object</a></li><li class="chapter-item expanded "><a href="../blender/addon-settings-options/index.html"><strong aria-hidden="true">8.1.5.</strong> Advanced settings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/addon-settings-options/pathes.html"><strong aria-hidden="true">8.1.5.1.</strong> Pathes</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../texturing/index.html"><strong aria-hidden="true">9.</strong> Texturing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../texturing/Ñreating-and-preparing-textures.html"><strong aria-hidden="true">9.1.</strong> Creating and preparing textures</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Map</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Why maps are bullshit</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Compiling maps</div></li></ol></li><li class="chapter-item expanded "><a href="../engine/index.html"><strong aria-hidden="true">11.</strong> Engine</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../engine/console-commands.html"><strong aria-hidden="true">11.1.</strong> Console commands</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> Compiling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Architecture</div></li></ol></li><li class="chapter-item expanded "><a href="../quests/index.html"><strong aria-hidden="true">12.</strong> Quests</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../quests/introduction.html"><strong aria-hidden="true">12.1.</strong> Introduction TO REDO</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.2.</strong> DON'T USE WTF</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anomaly Modding Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Igigog/anomaly-modding-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="condition-lists-tutorial"><a class="header" href="#condition-lists-tutorial">Condition Lists Tutorial</a></h1>
<p>Courtesy of tdef#6225
Transfered to modding book by demonized#1084</p>
<p>Condition list or condlist is one way to write dynamic configuration files and have this structure:</p>
<h3 id="somefileltx"><a class="header" href="#somefileltx">somefile.ltx</a></h3>
<pre><code class="language-ini">[some_section]
my_condlist = {=A(a1:a2) !B +C -D ~30} X %=E(e1) +F -G%, Y
</code></pre>
<p>and are used like this:</p>
<h3 id="somescriptscript"><a class="header" href="#somescriptscript">somescript.script</a></h3>
<pre><code class="language-lua">local ini = ini_file(&quot;path\\to\\somefile.ltx&quot;)
local condlist = ini:r_string_to_condlist(&quot;some_section&quot;,&quot;my_condlist&quot;)
local result = xr_logic.pick_section_from_condlist(game_object_1, game_object_2, condlist)
</code></pre>
<p>the code above is the equivalent of:</p>
<pre><code class="language-lua">if                                                                  -- {
    xr_conditions.A(game_object_1, game_object_2, {&quot;a1&quot;,&quot;a2&quot;}) and  -- =A(a1:a2)
    not xr_conditions.B(game_object_1, game_object_2) and           -- !B
    db.actor:has_info(&quot;C&quot;) and                                      -- +C
    not db.actor:has_info(&quot;D&quot;) and                                  -- -D    
    math.random(1,100) &gt; 30                                         -- ~30 (not a typo, ~30 means 70% chance, ~80 means 20% and so on)
    
then                                                                -- }
    result = &quot;X&quot;                                                    -- X
                                                                    -- %
    xr_effects.E(game_object_1, game_object_2, {&quot;e1&quot;})              -- =E(e1)
    db.actor:give_info_portion(&quot;F&quot;)                                 -- +F
    db.actor:disable_info_portion(&quot;G&quot;)                              -- -G
                                                                    -- %
else                                                                -- ,
    result = &quot;Y&quot;                                                    -- Y
end
</code></pre>
<p>Condlist can have more than one condition block:</p>
<pre><code>my_condlist = {-A -B} X, {-A +B} Y, Z
</code></pre>
<p>this is the equivalent of:</p>
<pre><code class="language-lua">if                                                                     
    not db.actor:has_info(&quot;A&quot;) and
    not db.actor:has_info(&quot;B&quot;)    
then        
    result = &quot;X&quot;
elseif
    not db.actor:has_info(&quot;A&quot;) and
    db.actor:has_info(&quot;B&quot;)    
then        
    result = &quot;Y&quot;
else
    result = &quot;Z&quot;
end
</code></pre>
<p>All condlist elements are optional, these are all valid condlist:</p>
<pre><code class="language-ini">cond1 =                      ;returns nil
cond2 = true                 ;returns &quot;true&quot;
cond3 = %=f%                 ;returns nil and executes xr_effects.f(a,b) --&gt; remember that a and b depend on the arguments of pick_section_from_condlist 
cond4 = {-info1} , %=f1%     ;if actor doesn't have info1 then returns nil, else returns nil and executes xr_effects.f1(a,b)
cond5 = {+info1} %=f1%       ;same effect of previous one but easier to read
</code></pre>
<p>The return value can be ignored to use condlist as a way to run functions listed from a config file, one example are the on_complete lines in task manager files:</p>
<pre><code class="language-ini">on_complete = %=reward_stash(true)%
</code></pre>
<p>this condlist has no condition (the part inside {}) and no return value, so calling </p>
<pre><code class="language-lua">xr_logic.pick_section_from_condlist()
</code></pre>
<p>on this is the equivalent of just calling </p>
<pre><code class="language-lua">xr_effects.reward_stash(x, x, {&quot;true&quot;})
</code></pre>
<p>Remember that both the return on pick_section_from_condlist and arguments passed to xr_conditions and xr_effects functions are strings and not boolean/numbers</p>
<p>Some config lines are condlist even if they aren't obvious, for example one line can be</p>
<pre><code class="language-ini">something = true
</code></pre>
<p>but in reality it's a condlist that always returns &quot;true&quot;, the only way to know for sure it's to search for &quot;something&quot; in all scripts and see if that config line is parsed as condlist anywhere.</p>
<p>Condlist can be also be parsed from a string</p>
<pre><code class="language-lua">local condlist1 = ini:r_string_to_condlist(&quot;some_section&quot;,&quot;my_condlist&quot;)
local somestring = ini:r_string_ex(&quot;some_section&quot;,&quot;my_condlist&quot;)
local condlist2 = xr_logic.parse_condlist(game_object, string1, string2, somestring)
</code></pre>
<p>condlist1 and condlist2 are the same, the first 3 arguments of xr_logic.parse_condlist are used only to print a message if the 4th (the actual condlist string) is nil, or just use alun_utils.parse_condlist(string)</p>
<p>Now we examine some condlist in Anomaly, what they mean and some examples of edits we can make.</p>
<h2 id="example-1"><a class="header" href="#example-1">Example 1</a></h2>
<p>near the end of tm_dynamic.ltx in configs/misc</p>
<pre><code class="language-ini">[simulation_task_52]
icon = ui_inGame2_PD_Torgovets_informatsiey
storyline = false
prior = 120
sim_communities = army, bandit, csky, dolg, ecolog, freedom, killer, stalker
repeat_timeout = 14400
precondition = {=random_chance(100)} true, false

title = simulation_task_52_name
descr = simulation_task_52_text
descr_functor = general_fate_desc
job_descr = simulation_task_52_about
task_complete_descr = simulation_task_52_finish

stage_complete     = 4
target_functor     = general_fate
status_functor     = fate_task
condlist_0         = {!task_giver_alive(simulation_task_52)} fail

on_job_descr = %=on_init_fate_task(simulation_task_52:detector_radio:broken_pda:k01_darkscape:k02_trucks_cemetery:y04_pole:l06_rostok:zaton:jupiter:pripyat)%
on_complete  = %=inc_goodwill_by_tasker_comm(simulation_task_52:50) =reward_stash(true) =reward_random_money(10500:18500) =reward_random_item(beer:vodka:vodka2:cigarettes_lucky_3:cigarettes_russian_3) -simulation_task_52_dead_spawned -simulation_task_52_item_spawned -simulation_task_52_target_found =remove_quest_item(simulation_task_52) =forget_dead_npcs(simulation_task_52) =pstor_reset(simulation_task_52)%
on_fail      = %=remove_quest_item(simulation_task_52) -simulation_task_52_dead_spawned -simulation_task_52_target_found -simulation_task_52_item_spawned =forget_dead_npcs(simulation_task_52) =pstor_reset(simulation_task_52)%
</code></pre>
<p>if we change precondition line to</p>
<pre><code class="language-ini">precondition = {=is_rain} true, false
</code></pre>
<p>then npc will propose this quest only if you ask them while it's raining</p>
<p>if we change it to</p>
<pre><code class="language-ini">precondition = false
</code></pre>
<p>then npc will never give this quest</p>
<p>true and false dont have any special meaning in the condlist on their own, in this case they matter only because the code that parses the condlist spelled out by the precondition line does different things
depending on the pick_section_from_condlist return value</p>
<p>if we change on_complete to</p>
<pre><code class="language-ini">on_complete = aslkdjslakd %=inc_goodwill_by_tasker_comm(simulation_task_52:50) =reward_stash(true) =reward_random_money(10500:18500) =reward_random_item(beer:vodka:vodka2:cigarettes_lucky_3:cigarettes_russian_3) -simulation_task_52_dead_spawned -simulation_task_52_item_spawned -simulation_task_52_target_found =remove_quest_item(simulation_task_52) =forget_dead_npcs(simulation_task_52) =pstor_reset(simulation_task_52)%
</code></pre>
<p>everything will still work as before, because the code that runs the pick_section_from_condlist on on_complete does nothing with the return value, so if it's nil, random text, true/false or whatever doesn't matter</p>
<h2 id="example-2"><a class="header" href="#example-2">Example 2</a></h2>
<p>inside devushka.ltx in configs/scripts/escape</p>
<pre><code class="language-ini">[walker@devushka]
path_walk = guard_2_walk
path_look = guard_2_look
on_info = {=surge_started} walker@surge
on_info2 = {=is_night} walker@sleeper_1
on_info3 = {=is_rain} walker@rain
combat_ignore_cond = {=actor_enemy =check_enemy_name(actor)} false, false
combat_ignore_keep_when_attacked = {=is_warfare} false, true
reach_distance = 10
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
invulnerable = {=is_warfare} false, {!actor_enemy} true, false
on_game_timer = 2400 | remark@smoking_stand
</code></pre>
<p>we change on_info3 to</p>
<pre><code class="language-ini">on_info3 = {=is_rain =is_actor_enemy_to_faction(freedom)} walker@rain
</code></pre>
<p>now Hip will seek shelter from rain only if we are enemy to Freedom, women be like that sometimes</p>
<h2 id="custom-conditions"><a class="header" href="#custom-conditions">Custom conditions</a></h2>
<p>if you want to make custom conditions either create new functions inside xr_conditions or make your own script file defining functions inside xr_conditions scope</p>
<h3 id="my_conditonsscript"><a class="header" href="#my_conditonsscript">my_conditons.script</a></h3>
<pre><code class="language-lua">function xr_conditions.has_more_money_than(a,b,c)
    
    -- a and b will be the game objects given as arguments to the xr_logic.pick_section_from_condlist call that evaluates this condlist
    -- most of the times a will be the actor game object and b one npc game object, but unless you're 100% sure of that (after testing or looking which pick_section_from_condlist parses it and with which arguments) 
    -- dont ever rely on those, i've seen cases where b is a server object or even nil

    local amount = c and c[1] and tonumber(c[1])
    -- c is a table where condlist arguments for the function are passed
    -- so has_more_money_than(10000) means c[1] == &quot;10000&quot; (a string!)
    -- so we need to convert it to a number to be able to compare it to another
    if amount then
        return db.actor:money() &gt; amount
    end
    return false
end
</code></pre>
<p>now we have has_more_money_than available as conditions for condlist, now we can do </p>
<pre><code class="language-ini">on_info = {=has_more_money_than(50000)} walker@surge
</code></pre>
<p>so Hip will stay outside during blowouts unless we have more than 50k rubles</p>
<p>you can do the same with xr_effects</p>
<h3 id="my_effectsscript"><a class="header" href="#my_effectsscript">my_effects.script</a></h3>
<pre><code class="language-lua">function xr_effects.give_tuna_to_actor(a,b,c)
    alife():create('conserva',vector(),0,0,0)
end
</code></pre>
<p>then change on_info2 to</p>
<pre><code class="language-ini">on_info2 = {=is_night} walker@sleeper_1 %=give_tuna_to_actor%
</code></pre>
<p>and when Hip goes to sleep you'll get a tuna can</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../configs/xml-files.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../configs/items/weapons/w_(weapon).ltx.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../configs/xml-files.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../configs/items/weapons/w_(weapon).ltx.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
